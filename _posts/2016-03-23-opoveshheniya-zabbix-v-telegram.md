---
title: "Оповещения Zabbix в Telegram"
date: "2016-03-23"
categories: 
  - Monitoring-System
tags: 
  - "telegram"
  - "zabbix"
image:
  path: /commons/laptop-2.jpg
  alt: "Оповещения Zabbix в Telegram"
---

> **Zabbix** — свободная система мониторинга и отслеживания статусов разнообразных сервисов компьютерной сети, серверов и сетевого оборудования. 
{: .prompt-tip }

## Подготовка Telegram

Добавляем `@crierbot` в список контактов и нажимаем START  
бот пришлет нам уникальный Token

## Подготовка скрипта

Создаем скрипт `/usr/lib/zabbix/alertscripts/telegram.sh`

```sh
$ sudo nano /usr/lib/zabbix/alertscripts/telegram.sh
#/bin/bash
wget "http://crierbot.appspot.com/$1/send?message=$2 || $3"
```

где (данные параметры будут указываться в настройках Zabbix):  

- `$1` - наш Token
- `$2` - Тема
- `$3` - Сообщение

Делаем скрипт исполняемым

```sh
$ sudo chmod +x /usr/lib/zabbix/alertscripts/telegram.sh
```

## Настройка Zabbix

Администрирование - Способы оповещения и нажимаем "Создать способ оповещения"

- Имя: `Telegram`
- Тип: `Скрипт`
- Имя скрипта: `telegram.sh` (полный путь указывать не надо)
- Параметры скрипта (появилось в Zabbix 3.0):
`Token`
`{ALERT.SUBJECT}`
`{ALERT.MESSAGE}`

Администрирование - Пользователи - выбираем пользователя - вкладка "Оповещение" и нажимаем "Добавить"

- Тип: `Telegram`
- Отправлять на: указываем наш Token
- Когда активен: `1-7,00:00-24:00` (т.д. 7 дней в неделю, 24 часа в сутки)
- Использовать, если важность: указать, при какой важности отправлять сообщения (я обычно ставлю среднюю, высокую, черезвычайную)
- Активно: поставить галочку

> Данный способ уже не вктуален
{: .prompt-info }
