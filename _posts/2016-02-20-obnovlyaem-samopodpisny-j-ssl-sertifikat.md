---
title: "Создаем самоподписный SSL-сертификат"
date: "2016-02-20"
categories: 
  - Web
tags: 
  - "ssl"
image:
  path: /commons/no-release-repo.jpg
  alt: "Создаем самоподписный SSL-сертификат"
---

> **SSL-сертификат** (Secure Sockets Layer) - это файл данных, который электронным способом привязывает ключ шифрования к информации о компании. Если на веб-сервере установлен сертификат, в браузере активируется «замок» и осуществляется безопасное подключение к веб-серверу по протоколу HTTPS.
{: .prompt-tip }

Если на почтовый ящик начали приходить сообщения:

```
################# SSL Certificate Warning ################
Certificate for hostname %server%, in file (or by nickname): /etc/pki/tls/certs/localhost.crt
The certificate needs to be renewed; this can be done using the 'genkey' program.
Browsers will not be able to correctly connect to this web site using SSL until the certificate is renewed.
########################################################## Generated by certwatch(1)
```

Необходимо продлить ssl-сертификат

Проверяем название файла и место хранения сертифтката

```sh
$ grep SSLCertificate /etc/httpd/conf.d/ssl.conf | grep -v SSLCertificateFile /etc/pki/tls/certs/localhost.crt SSLCertificateKeyFile /etc/pki/tls/private/localhost.key
```

Смотрм права на файлы

```sh
$ ls -al /etc/pki/tls/certs/localhost.crt
-rw-------. 1 root root 1566 Jan 20 2015 /etc/pki/tls/certs/localhost.crt
$ ls -al /etc/pki/tls/private/localhost.key
-rw-------. 1 root root 831 Jan 20 2015 /etc/pki/tls/private/localhost.key
```

Генерируем новый сертификат сроком на 10 лет и вводим данные

```sh
$ sudo openssl req -new -days 3650 -x509 -nodes -out /etc/pki/tls/certs/localhost.crt -keyout /etc/pki/tls/private/localhost.key
```

4.Проверяем права вновь созданных файлов

```sh
$ ls -al /etc/pki/tls/certs/localhost.crt
-rw-------. 1 root root 1367 Feb 20 13:48 /etc/pki/tls/certs/localhost.crt

$ ls -al /etc/pki/tls/private/localhost.key 
-rw-------. 1 root root 1704 Feb 20 13:48 /etc/pki/tls/private/localhost.key
```

5.Перезапускаем Apache

```sh
$ sudo server# service https restart
```
