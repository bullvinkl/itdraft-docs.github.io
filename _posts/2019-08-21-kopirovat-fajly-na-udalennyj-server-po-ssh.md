---
title: "Копировать файлы на удаленный сервер по SSH"
date: "2019-08-21"
categories: 
  - Linux
tags: 
  - "linux"
  - "scp"
  - "ssh"
image:
  path: /commons/964732_881f.jpg
  alt: "Копировать файлы на удаленный сервер"
---

> **SCP (Secure Copy Protocol)** - команда в Linux для защищенного копирования файлов или папок на удаленный компьютер (сервер) или с него, используя для этого протокол SSH (Secure Shell). SCP является составной частью пакета OpenSSH. Благодаря использованию ssh, SCP является отличной заменой для небезопасного протокола FTP, которой широко используется в Интернете.
{: .prompt-tip }

Для копирования файлов с удаленного сервера, либо на удаленный сервер, либо между удаленными серверами есть замечательная утилита `scp`

Несколько примеров использования команды `scp`

Скачиваем файл на локальную машину

```sh
$ sudo scp root@192.168.10.12:/home/backup/archive.tar.gz /media
```

С помощью этой команды мы скачиваем файл `/home/backup/archive.tar.gz` с удаленного сервера `192.168.10.12` в наш локальный каталог `/media`

Загружаем файл на удаленный сервер

```sh
$ sudo scp /media/archive.tar.gz root@192.168.10.12:/home/backup
```

С помощью этой команды мы загружаем файл `/media/archive.tar.gz` с локального ПК на удаленный сервер `192.168.10.12` в каталог `/home/backup`

Копируем каталог `log` с локального хоста в директорию `log` на удаленном хосте

```sh
$ sudo scp -r /home/log root@192.168.10.12:/opt/remote/log
```

Копирование между серверами

```sh
$ sudo scp -r root@server1.local:/home/dir/ root@server2.local:/home/dir/
```

Если SSH запущен на другом порту, можно указать это с помощью команды `-P` ("P" большая, и указывается перед хостом)

```sh
$ sudo scp -P 9999 file.zip root@192.168.10.12:~/
```

Копируем файлы `test1.txt` и `test2.txt` с локального компьютера в домашний каталог на удаленном сервере

```sh
$ sudo scp test1.txt test2.txt root@192.168.10.12:~
```

Копируем файл `test.txt` локального компьютера в домашний каталог на удаленном сервере. Для увеличиваем скорости работы SCP изменим алгоритм шифрования с `AES-128` (по умолчанию) на `Blowfish`

```sh
$ sudo scp -c blowfish test.txt root@192.168.10.12:~
```

Ограничиваем ширину канала используемого SCP до `300 Kbit/s`:

```sh
$ sudo scp -l 300 test.txt root@192.168.10.12:~
```

Дополнительные флаги, используемые SCP:

- `-r` - рекурсивное копирование (для директорий)
- `-C` - использовать сжатие при передачи
- `-P` - порт ssh
- `-p` - сохранить информацию о времени создания, модификации файла
